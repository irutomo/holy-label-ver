const e={idx:0,imgs:[],init:!1,startX:0,endX:0,cfg:{threshold:50,duration:300,keyboard:!0,touch:!0},el:{main:null,container:null,thumbs:[],prev:null,next:null,indicators:null},init(){if(!this.init)try{return this.el.main=document.querySelector("#mainImage")||document.querySelector(".product-detail-image img"),this.el.container=document.querySelector("#mainImageContainer")||document.querySelector(".product-detail-image"),this.el.main&&this.el.container?(this.collectImages(),!(this.imgs.length<=1)&&(this.buildUI(),this.bindEvents(),this.init=!0,!0)):!1}catch(e){return console.error("ImageCarousel init failed:",e),!1}},collectImages(){this.imgs=[];document.querySelectorAll(".thumbnail-item").forEach(e=>{const t=e.dataset.image||e.querySelector("img")?.src;t&&this.imgs.push({src:t,alt:e.querySelector("img")?.alt||""})}),0===this.imgs.length&&this.el.main.src&&this.imgs.push({src:this.el.main.src,alt:this.el.main.alt||""})},buildUI(){this.el.prev=this.createElement("button","carousel-prev","‹"),this.el.next=this.createElement("button","carousel-next","›"),this.el.indicators=this.createElement("div","carousel-indicators"),this.imgs.forEach((e,t)=>{const i=this.createElement("div","carousel-dot");0===t&&i.classList.add("active"),i.onclick=()=>this.goto(t),this.el.indicators.appendChild(i)}),this.el.container.appendChild(this.el.prev),this.el.container.appendChild(this.el.next),this.el.container.appendChild(this.el.indicators),this.injectStyles()},bindEvents(){this.el.prev.onclick=()=>this.prev(),this.el.next.onclick=()=>this.next(),this.cfg.keyboard&&document.addEventListener("keydown",e=>{"ArrowLeft"===e.key&&this.prev(),"ArrowRight"===e.key&&this.next()}),this.cfg.touch&&(this.el.main.addEventListener("touchstart",e=>{this.startX=e.touches[0].clientX},{passive:!0}),this.el.main.addEventListener("touchend",e=>{this.endX=e.changedTouches[0].clientX,this.handleSwipe()},{passive:!0}))},handleSwipe(){const e=this.startX-this.endX;Math.abs(e)>this.cfg.threshold&&(e>0?this.next():this.prev())},goto(e){if(e<0||e>=this.imgs.length||e===this.idx)return;this.idx=e;const t=this.imgs[e];this.el.main.style.opacity="0.5",setTimeout(()=>{this.el.main.src=t.src,this.el.main.alt=t.alt,this.el.main.style.opacity="1"},this.cfg.duration/2),this.el.indicators.querySelectorAll(".carousel-dot").forEach((t,i)=>{t.classList.toggle("active",i===e)})},next(){this.goto((this.idx+1)%this.imgs.length)},prev(){this.goto(0===this.idx?this.imgs.length-1:this.idx-1)},createElement(e,t,i=""){const s=document.createElement(e);return s.className=t,i&&(s.textContent=i),s},injectStyles(){if(document.getElementById("carousel-styles"))return;document.head.insertAdjacentHTML("beforeend",'\n        <style id="carousel-styles">\n        .carousel-prev,.carousel-next{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,0.7);color:#fff;border:none;width:32px;height:32px;border-radius:50%;cursor:pointer;z-index:10;transition:background 0.3s}\n        .carousel-prev{left:8px}.carousel-next{right:8px}\n        .carousel-prev:hover,.carousel-next:hover{background:rgba(0,0,0,0.9)}\n        .carousel-indicators{position:absolute;bottom:8px;left:50%;transform:translateX(-50%);display:flex;gap:4px}\n        .carousel-dot{width:8px;height:8px;border-radius:50%;background:rgba(255,255,255,0.5);cursor:pointer;transition:background 0.3s}\n        .carousel-dot.active{background:#fff}\n        .carousel-dot:hover{background:rgba(255,255,255,0.8)}\n        @media (max-width:768px){.carousel-prev,.carousel-next{width:28px;height:28px;font-size:14px}}\n        </style>')}};"undefined"!=typeof window&&(window.ImageCarouselManager=e),"undefined"!=typeof document&&document.addEventListener("DOMContentLoaded",()=>{document.querySelector("#mainImage, .product-detail-image")&&e.init()}),"undefined"!=typeof module&&module.exports&&(module.exports=e);